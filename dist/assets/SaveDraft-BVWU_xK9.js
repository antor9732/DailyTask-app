import{_ as x,h,r as O,c as n,g as k,a as e,F as c,d as f,t as u,e as C,w as b,v as y,f as J,o as a,i as V}from"./index-jjMz-0ea.js";const U={class:"container py-5",style:{"max-width":"900px"}},E={key:0,class:"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{"background-color":"rgba(0,0,0,0.3)","z-index":"1050"}},F={key:1,class:"alert alert-info"},A={class:"card-body"},$={class:"card-title"},P={class:"d-flex gap-2"},j=["onClick"],B=["onClick"],M=["onClick"],q={class:"card p-4 mt-4 bg-light"},K={class:"row mb-3"},z={class:"col-md-6 mb-3 mb-md-0"},L={class:"col-md-6"},R={class:"mb-3"},G={class:"row mb-3"},H={class:"col-md-6"},Q=["onUpdate:modelValue","placeholder"],W={class:"col-md-6"},X=["onUpdate:modelValue","placeholder"],Y={class:"mb-3"},Z=["onUpdate:modelValue","placeholder"],tt={class:"d-flex justify-content-between"},et={type:"submit",class:"btn btn-primary"},st={__name:"SaveDraft",setup(lt){const I=J(),d=h(JSON.parse(localStorage.getItem("drafts"))||[]),m=h(-1),s=O({date:"",name:"",focus:"",timeSpent:[""],keyInsights:[""],planTomorrow:[""]}),g=h(!1);function _(r){m.value=r;const t=d.value[r];Object.assign(s,JSON.parse(JSON.stringify(t)))}function S(r){s[r].push("")}function p(r){return r.every(t=>t&&t.trim()!=="")}function N(){if(!s.date||!s.name.trim()||!s.focus.trim()||!p(s.timeSpent)||!p(s.keyInsights)||!p(s.planTomorrow)){alert("Please fill all required fields!");return}m.value>=0?(d.value[m.value]=JSON.parse(JSON.stringify(s)),m.value=-1):d.value.push(JSON.parse(JSON.stringify(s))),localStorage.setItem("drafts",JSON.stringify(d.value)),w(),alert("Draft saved!")}function w(){var r;s.date=new Date().toISOString().substr(0,10),s.name=((r=JSON.parse(localStorage.getItem("user")))==null?void 0:r.name)||"",s.focus="",s.timeSpent=[""],s.keyInsights=[""],s.planTomorrow=[""],m.value=-1}function D(r){confirm("Are you sure you want to delete this draft?")&&(d.value.splice(r,1),localStorage.setItem("drafts",JSON.stringify(d.value)))}async function T(r){const t=d.value[r];if(!t.date||!t.name.trim()||!t.focus.trim()||!p(t.timeSpent)||!p(t.keyInsights)||!p(t.planTomorrow)){alert("Please fill all required fields in the draft before submitting!");return}let l=JSON.parse(localStorage.getItem("history"))||[];l.push({...t}),localStorage.setItem("history",JSON.stringify(l)),d.value.splice(r,1),localStorage.setItem("drafts",JSON.stringify(d.value)),g.value=!0,setTimeout(()=>{g.value=!1,I.push("/thank-you")},1500)}return w(),(r,t)=>(a(),n("div",U,[g.value?(a(),n("div",E,t[6]||(t[6]=[e("div",{class:"bg-white p-4 rounded shadow text-center"},[e("h4",{class:"mb-0"},"Submitted successfully!")],-1)]))):k("",!0),t[17]||(t[17]=e("h2",{class:"mb-4 text-center"},"Saved Drafts",-1)),d.value.length===0?(a(),n("div",F," No drafts saved yet. ")):k("",!0),(a(!0),n(c,null,f(d.value,(l,o)=>(a(),n("div",{key:o,class:"card mb-3"},[e("div",A,[e("h5",$,"Draft - "+u(l.date)+" by "+u(l.name),1),e("p",null,[t[7]||(t[7]=e("strong",null,"Focus:",-1)),V(" "+u(l.focus),1)]),t[8]||(t[8]=e("p",null,[e("strong",null,"Time Spent:")],-1)),e("ul",null,[(a(!0),n(c,null,f(l.timeSpent,(i,v)=>(a(),n("li",{key:v},u(i),1))),128))]),t[9]||(t[9]=e("p",null,[e("strong",null,"Key Insights:")],-1)),e("ul",null,[(a(!0),n(c,null,f(l.keyInsights,(i,v)=>(a(),n("li",{key:v},u(i),1))),128))]),t[10]||(t[10]=e("p",null,[e("strong",null,"Plan for Tomorrow:")],-1)),e("ul",null,[(a(!0),n(c,null,f(l.planTomorrow,(i,v)=>(a(),n("li",{key:v},u(i),1))),128))]),e("div",P,[e("button",{class:"btn btn-sm btn-primary",onClick:i=>_(o)},"Edit",8,j),e("button",{class:"btn btn-sm btn-success",onClick:i=>T(o)},"Submit",8,B),e("button",{class:"btn btn-sm btn-danger",onClick:i=>D(o)},"Delete",8,M)])])]))),128)),e("div",q,[e("h4",null,u(m.value>=0?"Edit Draft":"Add New Draft"),1),e("form",{onSubmit:C(N,["prevent"])},[e("div",K,[e("div",z,[t[11]||(t[11]=e("label",{for:"date",class:"form-label fw-bold"},"Update Date",-1)),b(e("input",{id:"date",type:"date",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=l=>s.date=l)},null,512),[[y,s.date]])]),e("div",L,[t[12]||(t[12]=e("label",{for:"name",class:"form-label fw-bold"},"Employee Name",-1)),b(e("input",{id:"name",type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=l=>s.name=l),readonly:""},null,512),[[y,s.name]])])]),e("div",R,[t[13]||(t[13]=e("label",{for:"focus",class:"form-label fw-bold"},"Daily Focus",-1)),b(e("input",{id:"focus",type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=l=>s.focus=l),placeholder:"e.g., Internal Tools, Prospect Engine"},null,512),[[y,s.focus]])]),e("div",G,[e("div",H,[t[14]||(t[14]=e("label",{class:"form-label fw-bold"},"Time Spent",-1)),(a(!0),n(c,null,f(s.timeSpent,(l,o)=>(a(),n("div",{key:"time-"+o,class:"mb-2"},[b(e("textarea",{class:"form-control","onUpdate:modelValue":i=>s.timeSpent[o]=i,placeholder:"Enter time spent item "+(o+1),rows:"2"},null,8,Q),[[y,s.timeSpent[o]]])]))),128)),e("button",{type:"button",class:"btn btn-sm btn-outline-primary mt-1",onClick:t[3]||(t[3]=l=>S("timeSpent"))}," + Add Item ")]),e("div",W,[t[15]||(t[15]=e("label",{class:"form-label fw-bold"},"Key Insights",-1)),(a(!0),n(c,null,f(s.keyInsights,(l,o)=>(a(),n("div",{key:"insight-"+o,class:"mb-2"},[b(e("textarea",{class:"form-control","onUpdate:modelValue":i=>s.keyInsights[o]=i,placeholder:"Enter key insight item "+(o+1),rows:"2"},null,8,X),[[y,s.keyInsights[o]]])]))),128)),e("button",{type:"button",class:"btn btn-sm btn-outline-primary mt-1",onClick:t[4]||(t[4]=l=>S("keyInsights"))}," + Add Item ")])]),e("div",Y,[t[16]||(t[16]=e("label",{class:"form-label fw-bold"},"Plan for Tomorrow",-1)),(a(!0),n(c,null,f(s.planTomorrow,(l,o)=>(a(),n("div",{key:"plan-"+o,class:"mb-2"},[b(e("textarea",{class:"form-control","onUpdate:modelValue":i=>s.planTomorrow[o]=i,placeholder:"Enter plan for tomorrow item "+(o+1),rows:"2"},null,8,Z),[[y,s.planTomorrow[o]]])]))),128)),e("button",{type:"button",class:"btn btn-sm btn-outline-primary mt-1",onClick:t[5]||(t[5]=l=>S("planTomorrow"))}," + Add Item ")]),e("div",tt,[e("button",{type:"button",class:"btn btn-secondary",onClick:w},"Cancel"),e("button",et,u(m.value>=0?"Save Changes":"Save Draft"),1)])],32)])]))}},nt=x(st,[["__scopeId","data-v-7fde6886"]]);export{nt as default};
